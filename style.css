:root{
  --bg:#9fd4ea; --panel:#2d3b42; --panelText:#e8f1f5;
  --pill:#eeeeee; --pillText:#222; --accent:#2a7cff;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);font-family: system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Noto Sans TC", Arial, sans-serif;}
#layout{max-width:1080px;margin:20px auto;padding:0 12px}
#game-col{position:relative;width:960px;margin:0 auto}
#game-wrap{position:relative;width:960px;height:540px;border-radius:18px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.2)}
#game{display:block;width:960px;height:540px;background:linear-gradient(#9fd4ea,#9fd4ea 65%,#7acbdf)}

.pill{display:inline-flex;align-items:center;gap:.5rem;background:#eef2f3;color:var(--pillText);
  border-radius:999px;padding:.25rem .6rem;font-weight:600;box-shadow:inset 0 0 0 1px rgba(0,0,0,.08)}
#hud-top-center{position:absolute;top:10px;left:50%;transform:translateX(-50%);display:flex;gap:.5rem;z-index:5}
#top-right{position:absolute;top:10px;right:10px;display:flex;gap:.5rem;z-index:6}
#log-controls .mini{margin-left:.25rem;font-size:.8rem;padding:.15rem .45rem;border-radius:10px;border:1px solid rgba(0,0,0,.1);background:white}

#debug-panel{position:absolute;left:12px;top:12px;z-index:6;width:130px;background:rgba(45,59,66,.9);color:var(--panelText);border-radius:10px;padding:6px 8px;font-size:12px}
.dbg-row{display:flex;justify-content:space-between;gap:.5rem}
.dbg-row>span:first-child{opacity:.8}

.touch-stack{position:absolute;z-index:7;display:flex;flex-direction:column;gap:10px}
#touch-left{left:20px;bottom:70px}
#touch-right{right:20px;bottom:70px}
.touch-btn{width:86px;height:64px;border:0;border-radius:14px;background:rgba(255,255,255,.8);box-shadow:0 6px 14px rgba(0,0,0,.18);font-size:22px}
.touch-btn.hold{transform:translateY(1px);opacity:.9}

#stage-clear{position:absolute;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.25);z-index:8}
#stage-clear[hidden]{display:none}
#stage-clear .title{font-size:44px;color:white;text-shadow:0 6px 18px rgba(0,0,0,.35);margin-bottom:14px;font-weight:900;letter-spacing:1px}
#stage-clear .primary{appearance:none;border:0;border-radius:999px;padding:10px 22px;background:var(--accent);color:#fff;font-weight:800;box-shadow:0 10px 20px rgba(42,124,255,.35)}

#stage-fail{position:absolute;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.25);z-index:8}
#stage-fail[hidden]{display:none}
#stage-fail .title{font-size:44px;color:white;text-shadow:0 6px 18px rgba(0,0,0,.35);margin-bottom:14px;font-weight:900;letter-spacing:1px}
#stage-fail .primary{appearance:none;border:0;border-radius:999px;padding:10px 22px;background:#e74c3c;color:#fff;font-weight:800;box-shadow:0 10px 20px rgba(231,76,60,.35)}

#doc-title{font-size:18px;margin:22px 0 6px}
.doc{margin:0;color:#19313a;opacity:.85}

/* Stage clear effect */
.clear-effect{
  position:absolute;
  width:80px;
  height:80px;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  animation:clear-spin 1.5s ease-out forwards;
  pointer-events:none;
}
@keyframes clear-spin{
  from{transform:translate(-50%,-50%) scale(.5) rotate(0deg);opacity:1;}
  to{transform:translate(-50%,-50%) scale(1.5) rotate(720deg);opacity:0;}
}

.fail-effect{
  position:absolute;
  inset:0;
  background:rgba(255,0,0,.4);
  animation:fail-flash 1s ease-out forwards;
  pointer-events:none;
}
@keyframes fail-flash{
  from{opacity:1;}
  to{opacity:0;}
}

/* Slide effect */
.slide-effect{
  position:absolute;
  width:48px;
  height:24px;
  pointer-events:none;
  animation:slide-pop .5s ease-out forwards;
}
@keyframes slide-pop{
  from{opacity:.8;transform:translate(-50%,-50%) scaleX(var(--sx,1)) scale(1);}
  to{opacity:0;transform:translate(-50%,-50%) scaleX(var(--sx,1)) scale(.5);}
}
